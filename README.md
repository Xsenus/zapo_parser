# Zapo Parser

–°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–∞–π—Ç–æ–≤ –±—Ä–µ–Ω–¥–æ–≤ —Å —Ü–µ–ª—å—é —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ–∫–∞—Ç–∞–ª–æ–≥–∞ —Å —Å–∞–π—Ç–∞ zapo.ru.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `stage1_brands_scraper.py` ‚Äî —Å–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±—Ä–µ–Ω–¥–∞—Ö –∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö  
- `stage2_contacts_scraper.py` ‚Äî –ø–æ–∏—Å–∫ —Å–∞–π—Ç–æ–≤ –±—Ä–µ–Ω–¥–æ–≤  
- `stage3_contacts_collector.py` ‚Äî —Å–±–æ—Ä email –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ —Å –≥–ª–∞–≤–Ω–æ–π –∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü  
- `stage4_export_to_excel.py` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel, –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ `.ru` –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–æ–º–µ–Ω—ã  
- `stage5_carbase_scraper.py` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –∞–≤—Ç–æ–∫–∞—Ç–∞–ª–æ–≥–∞ –±—Ä–µ–Ω–¥–æ–≤, –º–æ–¥–µ–ª–µ–π –∏ –≤–µ—Ä—Å–∏–π –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π  
- `stage6_parse_modifications.py` ‚Äî —Å–±–æ—Ä –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –ø–æ version_url  
- `stage7_parse_parts.py` ‚Äî —Å–±–æ—Ä –¥–µ—Ç–∞–ª–µ–π –ø–æ modification_url  
- `stage8_export_parts_to_excel.py` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –¥–µ—Ç–∞–ª–µ–π –≤ Excel  
- `stage9_parse_catalog_brands.py` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –±—Ä–µ–Ω–¥–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (CARS_FOREIGN, CARS_NATIVE, MOTORCYCLE)  
- `stage10_parse_models.py` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –º–æ–¥–µ–ª–µ–π –ø–æ –±—Ä–µ–Ω–¥–∞–º  
- `stage11_parse_modification_table.py` ‚Äî –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü—ã –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π
- `stage12_export_modifications_to_excel.py` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π –≤ Excel
- `stage13_oils_sitemaps.py` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è sitemap –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞ –º–∞—Å–µ–ª

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install -r requirements.txt
```

## üöÄ –ó–∞–ø—É—Å–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞

```bash
python stage4_export_to_excel.py          # –ö–æ–Ω—Ç–∞–∫—Ç—ã
python stage8_export_parts_to_excel.py    # –î–µ—Ç–∞–ª–∏
```

## üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- `contacts_ru_YYYY-MM-DD_HH-MM-SS.xlsx` ‚Äî –±—Ä–µ–Ω–¥—ã —Å —Å–∞–π—Ç–∞–º–∏ –≤ –∑–æ–Ω–µ `.ru`  
- `contacts_non_ru_YYYY-MM-DD_HH-MM-SS.xlsx` ‚Äî –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ  
- `stage4_export_log.txt` ‚Äî –ª–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è  

### –ê–≤—Ç–æ–∫–∞—Ç–∞–ª–æ–≥ –∏ –¥–µ—Ç–∞–ª–∏

- `stage5_carbase.json` ‚Äî –∞–≤—Ç–æ–∫–∞—Ç–∞–ª–æ–≥ —Å zapo.ru  
- `stage6_versions_detailed.json`, `stage7_parts_detailed.json`, `stage11_modifications_detailed.json` ‚Äî JSON —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏ –∏ –¥–µ—Ç–∞–ª—è–º–∏
- `stage12_modifications_export.xlsx` ‚Äî –∏—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π
- `sitemaps_output/sitemap_catalog_index.xml` ‚Äî sitemap –∫–∞—Ç–∞–ª–æ–≥–∞ –º–∞—Å–µ–ª

## üìå –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —ç–∫—Å–ø–æ—Ä—Ç–∞

–í `stage4_export_to_excel.py`:

```python
MAX_EMAILS = 2     # –°–∫–æ–ª—å–∫–æ email –¥–æ–±–∞–≤–ª—è—Ç—å (–∏–ª–∏ -1 –¥–ª—è –≤—Å–µ—Ö)
MAX_PHONES = 5     # –°–∫–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –¥–æ–±–∞–≤–ª—è—Ç—å (–∏–ª–∏ -1 –¥–ª—è –≤—Å–µ—Ö)
```

## üìù –§–æ—Ä–º–∞—Ç —Ç–∞–±–ª–∏—Ü

| –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç—Ä–∞–Ω–∏—Ü–∞ | –°–∞–π—Ç | Email 1 | Email 2 | ... | –¢–µ–ª–µ—Ñ–æ–Ω 1 | –¢–µ–ª–µ—Ñ–æ–Ω 2 | ... |
|----------|----------|------|---------|---------|-----|------------|-------------|-----|

- –ö–æ–ª-–≤–æ –∫–æ–ª–æ–Ω–æ–∫ –¥–ª—è email/—Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ ‚Äî –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É —á–∏—Å–ª—É –Ω–∞ –≥—Ä—É–ø–ø—É
- Email –∏ —Ç–µ–ª–µ—Ñ–æ–Ω—ã –æ—á–∏—â–∞—é—Ç—Å—è –æ—Ç –¥—É–±–ª–µ–π
- –¢–µ–ª–µ—Ñ–æ–Ω—ã –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `+7`, `8`, `00` ‚Üí `7XXXXXXXXXX`)

## üöò –û–± –∞–≤—Ç–æ–∫–∞—Ç–∞–ª–æ–≥–µ

`stage5_carbase_scraper.py` ‚Üí `stage11_parse_modification_table.py`

- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è: –±—Ä–µ–Ω–¥, –º–æ–¥–µ–ª—å, –≤–µ—Ä—Å–∏—è, –≥–æ–¥—ã –≤—ã–ø—É—Å–∫–∞, –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏, –¥–µ—Ç–∞–ª–∏
- –í–µ–¥—ë—Ç—Å—è –ª–æ–≥: `zapo_logs/`
- –í—Å–µ —ç—Ç–∞–ø—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç SOCKS5-–ø—Ä–æ–∫—Å–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ. –°–ø–∏—Å–æ–∫ –∑–µ—Ä–∫–∞–ª —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `utils.MIRRORS` –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö.
- –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `stageX_temp_results/`

## üîß TODO

- [ ] –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–º—É –∫–æ–¥—É
